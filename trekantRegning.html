<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        span:hover {
            cursor: grab;
        }

        span {
            width: 6vw;
            border-style: solid;
            border-width: 1px;
            border-radius: 10%;
            border-color: black;
            background-color: aquamarine;
            text-align: center;
        }

        #hurtigTaster {
            display: grid;
            width: 80vw;
            grid-template-columns: repeat(10, 1fr);
            grid-gap: 3px;
            display: grid;
        }

        #trekant {
            display: grid;
            width: 50vw;
            height: 30vw;
            grid-template-columns: 1fr 1fr 1fr 1fr;
        }

        img {
            width: 50vw;
            height: 30vw;
            position: absolute;
        }

        #tomrom {
            width: 12.5vw;
        }

        #inpTall1 {
            grid-column: span 2;
        }

        #inpTall2 {
            grid-column: span 2;
        }

        #inpTall3 {
            grid-column: span 2;
        }

        #inpTall1:focus {
            border-top-left-radius: 50%;
            border-top-right-radius: 50%;
        }

        #inpTall2:focus {
            border-top-left-radius: 50%;
        }

        #inpTall3:focus {
            border-top-right-radius: 50%;
        }

        input {
            width: 25vw;
            text-align: center;
            background-color: inherit;
            border-style: none;
            font-size: xx-large;
            z-index: 2;
        }

        @media only screen and (orientation:landscape) {
            input {
                font-size: xxx-large;
            }

            #hurtigTaster {
                display: none;
            }
        }
    </style>
</head>

<body>
    <div id="trekant">
        <img src="Trekant.png" alt="Bilde av trekant">
        <div id="tomrom">Tekst</div>
        <input id="inpTall1" value="6">
        <div id="tomrom"></div>
        <input id="inpTall2" value="2">
        <input id="inpTall3" value="3">
    </div>
    <h3 id="melding"></h3>
    <button id="btnVelgTall">Velg</button>
    <br>
    <div id="hurtigTaster">
    </div>

    <script>
        var poeng = 0;
        var deleModus = false;
        var desimalModus = false;
        var forrigeVarRett = true;
        var ekspertModus = 1;
        var tall1 = 6;
        var tall2 = 2;
        var tall3 = 3;
        var inpTall1 = document.getElementById("inpTall1");
        var inpTall2 = document.getElementById("inpTall2");
        var inpTall3 = document.getElementById("inpTall3");
        var melding = document.getElementById("melding");
        var hurtigTaster = document.getElementById("hurtigTaster");
        var tallIBruk = 1;
        var arrayTallIBruk = [inpTall1, inpTall2, inpTall3]

        var btnVelgTall = document.getElementById("btnVelgTall");
        btnVelgTall.onclick = vurderTallene;

        hurtigTaster.onclick = tastatur;

        function settOppHurtigTaster() {
            hurtigTaster.innerHTML = "";
            if (!desimalModus) {
                if (ekspertModus == 1) {
                    for (var i = 1; i <= 25; i++) {
                        hurtigTaster.innerHTML += "<span>" + i + "</span>";
                    }
                }

                if (ekspertModus == 2) {
                    for (var i = 1; i <= 100; i++) {
                        hurtigTaster.innerHTML += "<span>" + i + "</span>";
                    }
                }
            }
            else {
                hurtigTaster.innerHTML += "<h3>Nå må svaret tastes inn...</h3>";
            }

        }

        function tastatur(evt) {
            arrayTallIBruk[tallIBruk - 1].value = evt.target.innerHTML;
            vurderTallene();
        }

        function resetInputVerdier() {

            //EkspertModus skal gjøre at oppgavene blir vanskeligere
            //1 = tall fra 1-5
            //2 = tall fra 1-10
            //3 = tall fra 1-20
            if (ekspertModus == 1) {
                tall2 = Math.ceil(Math.random() * 5);
                tall3 = Math.ceil(Math.random() * 5);
            }
            else if (ekspertModus == 2) {
                tall2 = Math.ceil(Math.random() * 10);
                tall3 = Math.ceil(Math.random() * 10);
            }
            else if (ekspertModus == 3) {
                tall2 = Math.ceil(Math.random() * 20);
                tall3 = Math.ceil(Math.random() * 20);
            }
            else {
                alert("fant ikke ekspertModus")
            }

            //Sett opp tastatur dersom vi er i portrettmodus
            settOppHurtigTaster();

            //Tallet i toppen er ALLID produktet av de to nede
            tall1 = tall2 * tall3;

            //Pga desimalproblem må man først finne svaret
            //før vi deler begge tallene på 10!
            if (desimalModus) {
                tall1 = tall1 / 10;
                if (Math.random() > 0.5) {
                    tall2 = tall2 / 10;
                } else {
                    tall3 = tall3 / 10;
                }
            }

            if (delemodus) {

                //Hvis vi er i desimalmodus MÅ vi tvinge
                //kun en desimal (.toFixed)
                if (desimalModus) {
                    inpTall1.value = String(tall1.toFixed(1));
                }

                //Ellers vil vi IKKE har noen desimal!
                else {
                    inpTall1.value = String(tall1);
                }

                //skjul tall2 ELLER tall3 (tilfeldig)
                if (Math.random() > 0.5) {
                    inpTall2.value = String(tall2);
                    inpTall3.value = "";
                    inpTall3.focus();
                    tallIBruk = 3;
                }
                else {
                    inpTall2.value = "";
                    inpTall2.focus();
                    inpTall3.value = String(tall3);
                    tallIBruk = 2;
                }

                //Ikke i delemodus, dvs vi er i gangemodus    
            } else {
                inpTall1.value = "";
                inpTall1.focus();
                inpTall2.value = String(tall2);
                inpTall3.value = String(tall3);
                tallIBruk = 1;
            }
        }

        function vurderTallene() {
            if ((poeng > 50) && (forrigeVarRett)) {
                delemodus = true;
            }
            else {
                delemodus = false;
            }

            if ((poeng > 80) && (forrigeVarRett)) {
                desimalModus = true;
            }
            else {
                desimalModus = false;
            }

            //Ekspertmodus bestemmer hvor tøffe oppgavene skal være
            if ((poeng > 40) && (forrigeVarRett)) {
                ekspertModus = 3;
            }
            else if ((poeng > 10) && (forrigeVarRett)) {
                ekspertModus = 2;
            }
            else {
                ekspertModus = 1;
            }

            tall1 = Number(inpTall1.value);
            tall2 = Number(inpTall2.value);
            tall3 = Number(inpTall3.value);

            if (Math.abs(tall1 - (tall2 * tall3)) < 0.01) {
                forrigeVarRett = true;
                btnVelgTall.style.backgroundColor = "lightgrey";
                poeng++;
                melding.style.color = "green";
                melding_text = ["Bra!", "Fantastisk", "Supert!!", "Yes!!", "Jepp!", "Jadda!!!", "Fytti katta så bra!", "Genialt", "Hoho", "Einstein!", "Mattehue!", "Spør meg igjen da!", "Ah, lett!", "Lættis"]
                var nr = Math.floor(Math.random() * melding_text.length);
                melding.innerHTML = melding_text[nr];
                btnVelgTall.innerHTML = poeng + " poeng";

                //reset dersom man svarer rett
                resetInputVerdier()
            }

            else {
                poeng--;
                forrigeVarRett = false;
                btnVelgTall.style.backgroundColor = "darkgrey";
                melding.style.color = "red";
                melding.innerHTML = "...Feil...";
                btnVelgTall.innerHTML = poeng + " poeng";
                if (tallIBruk = 1) { inpTall1.value = ""; inpTall1.focus(); }
                else if (tallIBruk = 2) { inpTall2.value = ""; inpTall2.focus(); }
                else if (tallIBruk = 3) { inpTall3.value = ""; inpTall3.focus(); }
                else { alert("Jøje oss - tallIBruk er: " + tallIBruk) }
            }
        }

        document.addEventListener("keypress", function (event) {
            if (event.key === "Enter") {
                // Cancel the default action, if needed
                event.preventDefault();
                // Trigger the button element with a click
                // document.getElementById("myBtn").click();
                vurderTallene();
            }
        })

    </script>
</body>

</html>